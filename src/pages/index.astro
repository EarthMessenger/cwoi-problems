---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProblemTable from "../components/ProblemTable.astro";

Astro.response.headers.set(
  "Cache-Control",
  "s-maxage=86400, stale-while-revalidate",
);
---

<BaseLayout>
  <form id="name-form">
    <input placeholder="名字" id="name-input" />
  </form>
  <ProblemTable />
</BaseLayout>

<style>
  input {
    margin: 0.5em 0;
  }
</style>

<script>
  const form = document.getElementById("name-form") as HTMLFormElement;
  const input = document.getElementById("name-input") as HTMLInputElement;
  form.onsubmit = (ev) => {
    if (input.value === "") location.href = "/";
    else location.href = `/solved/${input.value}`;
    return false;
  };
</script>
